import { r as registerInstance, h } from './index-65ac344c.js';

const globalstylesCss = ":root{--app-primary-color:greenyellow}ul,ol{margin-top:0;margin-bottom:10px}ul ul,ol ul,ul ol,ol ol{margin-bottom:0}body,p,li{font-family:\"Open Sans\", Arial, sans-serif;font-size:18px;line-height:32px;color:#444;font-weight:400}a{font-family:\"Open Sans\", Arial, sans-serif;color:#14847e;text-decoration:none}p a{color:#14847e;text-decoration-line:underline;text-decoration-style:dotted}p a:focus,p a:hover{color:#1ba39c;text-decoration:none}em{background:#cce9e6;padding:3px;font-style:italic;font-weight:700}h1,h2,h3,h4,h5,h6{font-family:bree-serif, serif;font-weight:700}h1{font-size:48px;line-height:63px}h2{font-size:32px;line-height:48px}h3,h3 a{line-height:40px;font-size:24px}h4{color:#502669;text-align:center;font-size:20px;margin:0 0 40px}h5{color:#502669;text-align:center;font-size:18px;margin:0 0 20px}h6{font-size:16px;margin:0 0 20px;color:#502669}@media (max-width:600px){h1{font-size:32px}h2{font-size:26px}h3,h3 a{font-size:21px}h4{font-size:18px}h5{font-size:16px}h6{font-size:14px}}.container{margin-right:auto;margin-left:auto;padding-left:0px;padding-right:0px}@media (min-width: 768px){.container{width:750px}}@media (min-width: 992px){.container{width:970px}}@media (min-width: 1200px){.container{width:1200px}}@media (max-width: 768px){.container{margin-left:10px;margin-right:10px;margin-top:37px}}.container-fluid{margin-right:auto;margin-left:auto;padding-left:0px;padding-right:0px}.row{margin-left:-14px;margin-right:-14px}.col-xs-1,.col-sm-1,.col-md-1,.col-lg-1,.col-xs-2,.col-sm-2,.col-md-2,.col-lg-2,.col-xs-3,.col-sm-3,.col-md-3,.col-lg-3,.col-xs-4,.col-sm-4,.col-md-4,.col-lg-4,.col-xs-5,.col-sm-5,.col-md-5,.col-lg-5,.col-xs-6,.col-sm-6,.col-md-6,.col-lg-6,.col-xs-7,.col-sm-7,.col-md-7,.col-lg-7,.col-xs-8,.col-sm-8,.col-md-8,.col-lg-8,.col-xs-9,.col-sm-9,.col-md-9,.col-lg-9,.col-xs-10,.col-sm-10,.col-md-10,.col-lg-10,.col-xs-11,.col-sm-11,.col-md-11,.col-lg-11,.col-xs-12,.col-sm-12,.col-md-12,.col-lg-12{position:relative;min-height:1px;padding-left:14px;padding-right:14px}.col-xs-1,.col-xs-2,.col-xs-3,.col-xs-4,.col-xs-5,.col-xs-6,.col-xs-7,.col-xs-8,.col-xs-9,.col-xs-10,.col-xs-11,.col-xs-12{float:left}.col-xs-12{width:100%}.col-xs-11{width:91.66666667%}.col-xs-10{width:83.33333333%}.col-xs-9{width:75%}.col-xs-8{width:66.66666667%}.col-xs-7{width:58.33333333%}.col-xs-6{width:50%}.col-xs-5{width:41.66666667%}.col-xs-4{width:33.33333333%}.col-xs-3{width:25%}.col-xs-2{width:16.66666667%}.col-xs-1{width:8.33333333%}.col-xs-pull-12{right:100%}.col-xs-pull-11{right:91.66666667%}.col-xs-pull-10{right:83.33333333%}.col-xs-pull-9{right:75%}.col-xs-pull-8{right:66.66666667%}.col-xs-pull-7{right:58.33333333%}.col-xs-pull-6{right:50%}.col-xs-pull-5{right:41.66666667%}.col-xs-pull-4{right:33.33333333%}.col-xs-pull-3{right:25%}.col-xs-pull-2{right:16.66666667%}.col-xs-pull-1{right:8.33333333%}.col-xs-pull-0{right:auto}.col-xs-push-12{left:100%}.col-xs-push-11{left:91.66666667%}.col-xs-push-10{left:83.33333333%}.col-xs-push-9{left:75%}.col-xs-push-8{left:66.66666667%}.col-xs-push-7{left:58.33333333%}.col-xs-push-6{left:50%}.col-xs-push-5{left:41.66666667%}.col-xs-push-4{left:33.33333333%}.col-xs-push-3{left:25%}.col-xs-push-2{left:16.66666667%}.col-xs-push-1{left:8.33333333%}.col-xs-push-0{left:auto}.col-xs-offset-12{margin-left:100%}.col-xs-offset-11{margin-left:91.66666667%}.col-xs-offset-10{margin-left:83.33333333%}.col-xs-offset-9{margin-left:75%}.col-xs-offset-8{margin-left:66.66666667%}.col-xs-offset-7{margin-left:58.33333333%}.col-xs-offset-6{margin-left:50%}.col-xs-offset-5{margin-left:41.66666667%}.col-xs-offset-4{margin-left:33.33333333%}.col-xs-offset-3{margin-left:25%}.col-xs-offset-2{margin-left:16.66666667%}.col-xs-offset-1{margin-left:8.33333333%}.col-xs-offset-0{margin-left:0%}@media (min-width: 768px){.col-sm-1,.col-sm-2,.col-sm-3,.col-sm-4,.col-sm-5,.col-sm-6,.col-sm-7,.col-sm-8,.col-sm-9,.col-sm-10,.col-sm-11,.col-sm-12{float:left}.col-sm-12{width:100%}.col-sm-11{width:91.66666667%}.col-sm-10{width:83.33333333%}.col-sm-9{width:75%}.col-sm-8{width:66.66666667%}.col-sm-7{width:58.33333333%}.col-sm-6{width:50%}.col-sm-5{width:41.66666667%}.col-sm-4{width:33.33333333%}.col-sm-3{width:25%}.col-sm-2{width:16.66666667%}.col-sm-1{width:8.33333333%}.col-sm-pull-12{right:100%}.col-sm-pull-11{right:91.66666667%}.col-sm-pull-10{right:83.33333333%}.col-sm-pull-9{right:75%}.col-sm-pull-8{right:66.66666667%}.col-sm-pull-7{right:58.33333333%}.col-sm-pull-6{right:50%}.col-sm-pull-5{right:41.66666667%}.col-sm-pull-4{right:33.33333333%}.col-sm-pull-3{right:25%}.col-sm-pull-2{right:16.66666667%}.col-sm-pull-1{right:8.33333333%}.col-sm-pull-0{right:auto}.col-sm-push-12{left:100%}.col-sm-push-11{left:91.66666667%}.col-sm-push-10{left:83.33333333%}.col-sm-push-9{left:75%}.col-sm-push-8{left:66.66666667%}.col-sm-push-7{left:58.33333333%}.col-sm-push-6{left:50%}.col-sm-push-5{left:41.66666667%}.col-sm-push-4{left:33.33333333%}.col-sm-push-3{left:25%}.col-sm-push-2{left:16.66666667%}.col-sm-push-1{left:8.33333333%}.col-sm-push-0{left:auto}.col-sm-offset-12{margin-left:100%}.col-sm-offset-11{margin-left:91.66666667%}.col-sm-offset-10{margin-left:83.33333333%}.col-sm-offset-9{margin-left:75%}.col-sm-offset-8{margin-left:66.66666667%}.col-sm-offset-7{margin-left:58.33333333%}.col-sm-offset-6{margin-left:50%}.col-sm-offset-5{margin-left:41.66666667%}.col-sm-offset-4{margin-left:33.33333333%}.col-sm-offset-3{margin-left:25%}.col-sm-offset-2{margin-left:16.66666667%}.col-sm-offset-1{margin-left:8.33333333%}.col-sm-offset-0{margin-left:0%}}@media (min-width: 992px){.col-md-1,.col-md-2,.col-md-3,.col-md-4,.col-md-5,.col-md-6,.col-md-7,.col-md-8,.col-md-9,.col-md-10,.col-md-11,.col-md-12{float:left}.col-md-12{width:100%}.col-md-11{width:91.66666667%}.col-md-10{width:83.33333333%}.col-md-9{width:75%}.col-md-8{width:66.66666667%}.col-md-7{width:58.33333333%}.col-md-6{width:50%}.col-md-5{width:41.66666667%}.col-md-4{width:33.33333333%}.col-md-3{width:25%}.col-md-2{width:16.66666667%}.col-md-1{width:8.33333333%}.col-md-pull-12{right:100%}.col-md-pull-11{right:91.66666667%}.col-md-pull-10{right:83.33333333%}.col-md-pull-9{right:75%}.col-md-pull-8{right:66.66666667%}.col-md-pull-7{right:58.33333333%}.col-md-pull-6{right:50%}.col-md-pull-5{right:41.66666667%}.col-md-pull-4{right:33.33333333%}.col-md-pull-3{right:25%}.col-md-pull-2{right:16.66666667%}.col-md-pull-1{right:8.33333333%}.col-md-pull-0{right:auto}.col-md-push-12{left:100%}.col-md-push-11{left:91.66666667%}.col-md-push-10{left:83.33333333%}.col-md-push-9{left:75%}.col-md-push-8{left:66.66666667%}.col-md-push-7{left:58.33333333%}.col-md-push-6{left:50%}.col-md-push-5{left:41.66666667%}.col-md-push-4{left:33.33333333%}.col-md-push-3{left:25%}.col-md-push-2{left:16.66666667%}.col-md-push-1{left:8.33333333%}.col-md-push-0{left:auto}.col-md-offset-12{margin-left:100%}.col-md-offset-11{margin-left:91.66666667%}.col-md-offset-10{margin-left:83.33333333%}.col-md-offset-9{margin-left:75%}.col-md-offset-8{margin-left:66.66666667%}.col-md-offset-7{margin-left:58.33333333%}.col-md-offset-6{margin-left:50%}.col-md-offset-5{margin-left:41.66666667%}.col-md-offset-4{margin-left:33.33333333%}.col-md-offset-3{margin-left:25%}.col-md-offset-2{margin-left:16.66666667%}.col-md-offset-1{margin-left:8.33333333%}.col-md-offset-0{margin-left:0%}}@media (min-width: 1200px){.col-lg-1,.col-lg-2,.col-lg-3,.col-lg-4,.col-lg-5,.col-lg-6,.col-lg-7,.col-lg-8,.col-lg-9,.col-lg-10,.col-lg-11,.col-lg-12{float:left}.col-lg-12{width:100%}.col-lg-11{width:91.66666667%}.col-lg-10{width:83.33333333%}.col-lg-9{width:75%}.col-lg-8{width:66.66666667%}.col-lg-7{width:58.33333333%}.col-lg-6{width:50%}.col-lg-5{width:41.66666667%}.col-lg-4{width:33.33333333%}.col-lg-3{width:25%}.col-lg-2{width:16.66666667%}.col-lg-1{width:8.33333333%}.col-lg-pull-12{right:100%}.col-lg-pull-11{right:91.66666667%}.col-lg-pull-10{right:83.33333333%}.col-lg-pull-9{right:75%}.col-lg-pull-8{right:66.66666667%}.col-lg-pull-7{right:58.33333333%}.col-lg-pull-6{right:50%}.col-lg-pull-5{right:41.66666667%}.col-lg-pull-4{right:33.33333333%}.col-lg-pull-3{right:25%}.col-lg-pull-2{right:16.66666667%}.col-lg-pull-1{right:8.33333333%}.col-lg-pull-0{right:auto}.col-lg-push-12{left:100%}.col-lg-push-11{left:91.66666667%}.col-lg-push-10{left:83.33333333%}.col-lg-push-9{left:75%}.col-lg-push-8{left:66.66666667%}.col-lg-push-7{left:58.33333333%}.col-lg-push-6{left:50%}.col-lg-push-5{left:41.66666667%}.col-lg-push-4{left:33.33333333%}.col-lg-push-3{left:25%}.col-lg-push-2{left:16.66666667%}.col-lg-push-1{left:8.33333333%}.col-lg-push-0{left:auto}.col-lg-offset-12{margin-left:100%}.col-lg-offset-11{margin-left:91.66666667%}.col-lg-offset-10{margin-left:83.33333333%}.col-lg-offset-9{margin-left:75%}.col-lg-offset-8{margin-left:66.66666667%}.col-lg-offset-7{margin-left:58.33333333%}.col-lg-offset-6{margin-left:50%}.col-lg-offset-5{margin-left:41.66666667%}.col-lg-offset-4{margin-left:33.33333333%}.col-lg-offset-3{margin-left:25%}.col-lg-offset-2{margin-left:16.66666667%}.col-lg-offset-1{margin-left:8.33333333%}.col-lg-offset-0{margin-left:0%}}@media (min-width: 768px){.col-md-4{flex:none}}.col{flex-basis:auto;-ms-flex-positive:1;flex-grow:1;max-width:100%}";

const addVarsityScoresCss = globalstylesCss + "li{list-style:none;padding:1em;margin:1em;cursor:pointer;-webkit-box-shadow:0.5px 3px 5px 0px rgba(0,0,0,0.15);-moz-box-shadow:.5px 3px 5px 0px rgba(0,0,0,0.15);box-shadow:0.5px 3px 5px 0px rgba(0,0,0,0.15)}ul{min-width:70%}form{display:flex;flex-direction:column;justify-content:space-around;align-items:space-around}form span{font-size:16px;line-height:25px}label,input{display:inline-block}label{font-size:16px;margin:0 1em}input{display:inline;min-width:80px;border:1px solid #502669;font-size:18px;border-top:none;border-right:none;border-left:none}.flex{display:flex;justify-content:center;margin:1em 0}.title{color:#502669;font-weight:bold;text-align:center;margin:1em}button{padding:1em;cursor:pointer;-webkit-box-shadow:0.5px 3px 5px 0px rgba(0,0,0,0.15);-moz-box-shadow:.5px 3px 5px 0px rgba(0,0,0,0.15);box-shadow:0.5px 3px 5px 0px rgba(0,0,0,0.15);font-size:16px;width:100px;margin:1em auto}";

const AddVarsityScores = class {
    constructor(hostRef) {
        registerInstance(this, hostRef);
        this.logInModalOpen = !this.token;
    }
    componentDidLoad() {
        let url = `https://varsity-db.firebaseio.com/${this.year}.json`;
        fetch(url)
            .then(res => res.json())
            .then(data => {
            this.eventsData = data;
        });
    }
    closeModal(e) {
        console.log(e);
        this.modalOpen = false;
        this.activeID = '';
    }
    mapToLi(data) {
        return data.map(node => {
            let style;
            let scoreText = '';
            if (node.score) {
                if (node.score[1] >= 0) {
                    style = {
                        'background-color': '#502669',
                        'color': 'white'
                    };
                    scoreText = `Kings: ${node.score[0]} - UCL: ${node.score[1]}`;
                }
            }
            return h("li", { "data-id": node.Id, style: style, onClick: (e => this.clickListener(e)) }, node.Title, h("br", null), scoreText);
        });
    }
    createScoreCard(id) {
        let event = this.eventsData.find(node => node.Id == id);
        if (event) {
            return (h("div", { class: "event-info" }, h("form", { onSubmit: (e) => this.submitScore(e) }, h("span", { class: "title" }, event.Title), h("div", { class: "flex" }, h("label", null, " UCL"), h("input", { type: "number", value: event.score ? event.score[1] : '', id: "uclScore" })), h("div", { class: "flex" }, h("label", null, " King's"), h("input", { type: "number", value: event.score ? event.score[0] : '', id: "kingScore" })), h("button", null, "Submit"))));
        }
        else {
            console.log("event not found");
            return '';
        }
    }
    submitScore(e) {
        e.preventDefault();
        let element = e.target;
        let uclScore = element[0].value;
        let kingsScore = element[1].value;
        let scores = !uclScore || !kingsScore ? [-1, -1] : [kingsScore, uclScore];
        //CAN I USE FIND HERE? 
        let duplicate = [...this.eventsData];
        for (let x = 0; x < duplicate.length; x++) {
            if (duplicate[x].Id == this.activeID) {
                duplicate[x].score = scores;
            }
        }
        //NOW UPDATE DATA IN STATE, THEN POST DATA
        this.eventsData = duplicate;
        this.postToDatabase(duplicate);
    }
    postToDatabase(data) {
        const token = localStorage.getItem('kclsu_token');
        let url = `https://varsity-db.firebaseio.com/${this.year}.json?auth=${token}`;
        let payload = {
            method: 'PUT',
            cache: 'no-cache',
            credentials: 'same-origin',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(data) // body data type must match "Content-Type" header
        };
        fetch(url, payload)
            .then(res => {
            if (res.status) {
                this.error = '';
                this.modalOpen = false;
                this.activeID = false;
                this.eventsData = data;
            }
        })
            .catch(er => this.error = er);
    }
    clickListener(e) {
        this.activeID = e.target.dataset.id;
        this.modalOpen = true;
    }
    render() {
        let scoreCard = !this.modalOpen ? '' : this.createScoreCard(this.activeID);
        return ([h("h2", { style: { "text-align": "center" } }, " Add Scores to Database"),
            h("user-login", { database: "varsity" }),
            h("flex-container", { alignx: "center" }, h("kclsu-modal", { show: this.modalOpen }, scoreCard, this.error ? this.error : ''), h("ul", null, !this.eventsData ? '' : this.mapToLi(this.eventsData)))
        ]);
    }
};
AddVarsityScores.style = addVarsityScoresCss;

export { AddVarsityScores as add_varsity_scores };
