import { r as registerInstance, h, g as getElement } from './index-65ac344c.js';

const presets = [
    {
        name: 'Home Banner',
        id: 'Home_Banner',
        dimensions: '780 x 600'
    },
    {
        name: 'Event Card',
        id: 'Event_Card',
        dimensions: '1032 x 583'
    },
    {
        name: 'Page Banner',
        id: 'Page_Banner',
        dimensions: '1280 x 600'
    },
    {
        name: 'Product',
        id: 'Product_Image',
        dimensions: '800 x 1000'
    },
    {
        name: 'Standard',
        id: 'Image_Medium',
        dimensions: '800 x auto'
    },
    {
        name: 'Venue Banner',
        id: 'Venue_Banner',
        dimensions: '1000 x 1000'
    },
    {
        name: 'Gallery Square',
        id: 'Gallery_Square',
        dimensions: '400 x 400'
    },
    {
        name: 'Home Advert',
        id: 'Home_Advert',
        dimensions: '1200 x 400'
    },
];

const globalstylesCss = ":root{--app-primary-color:greenyellow}ul,ol{margin-top:0;margin-bottom:10px}ul ul,ol ul,ul ol,ol ol{margin-bottom:0}body,p,li{font-family:\"Open Sans\", Arial, sans-serif;font-size:18px;line-height:32px;color:#444;font-weight:400}a{font-family:\"Open Sans\", Arial, sans-serif;color:#14847e;text-decoration:none}p a{color:#14847e;text-decoration-line:underline;text-decoration-style:dotted}p a:focus,p a:hover{color:#1ba39c;text-decoration:none}em{background:#cce9e6;padding:3px;font-style:italic;font-weight:700}h1,h2,h3,h4,h5,h6{font-family:bree-serif, serif;font-weight:700}h1{font-size:48px;line-height:63px}h2{font-size:32px;line-height:48px}h3,h3 a{line-height:40px;font-size:24px}h4{color:#502669;text-align:center;font-size:20px;margin:0 0 40px}h5{color:#502669;text-align:center;font-size:18px;margin:0 0 20px}h6{font-size:16px;margin:0 0 20px;color:#502669}@media (max-width:600px){h1{font-size:32px}h2{font-size:26px}h3,h3 a{font-size:21px}h4{font-size:18px}h5{font-size:16px}h6{font-size:14px}}.container{margin-right:auto;margin-left:auto;padding-left:0px;padding-right:0px}@media (min-width: 768px){.container{width:750px}}@media (min-width: 992px){.container{width:970px}}@media (min-width: 1200px){.container{width:1200px}}@media (max-width: 768px){.container{margin-left:10px;margin-right:10px;margin-top:37px}}.container-fluid{margin-right:auto;margin-left:auto;padding-left:0px;padding-right:0px}.row{margin-left:-14px;margin-right:-14px}.col-xs-1,.col-sm-1,.col-md-1,.col-lg-1,.col-xs-2,.col-sm-2,.col-md-2,.col-lg-2,.col-xs-3,.col-sm-3,.col-md-3,.col-lg-3,.col-xs-4,.col-sm-4,.col-md-4,.col-lg-4,.col-xs-5,.col-sm-5,.col-md-5,.col-lg-5,.col-xs-6,.col-sm-6,.col-md-6,.col-lg-6,.col-xs-7,.col-sm-7,.col-md-7,.col-lg-7,.col-xs-8,.col-sm-8,.col-md-8,.col-lg-8,.col-xs-9,.col-sm-9,.col-md-9,.col-lg-9,.col-xs-10,.col-sm-10,.col-md-10,.col-lg-10,.col-xs-11,.col-sm-11,.col-md-11,.col-lg-11,.col-xs-12,.col-sm-12,.col-md-12,.col-lg-12{position:relative;min-height:1px;padding-left:14px;padding-right:14px}.col-xs-1,.col-xs-2,.col-xs-3,.col-xs-4,.col-xs-5,.col-xs-6,.col-xs-7,.col-xs-8,.col-xs-9,.col-xs-10,.col-xs-11,.col-xs-12{float:left}.col-xs-12{width:100%}.col-xs-11{width:91.66666667%}.col-xs-10{width:83.33333333%}.col-xs-9{width:75%}.col-xs-8{width:66.66666667%}.col-xs-7{width:58.33333333%}.col-xs-6{width:50%}.col-xs-5{width:41.66666667%}.col-xs-4{width:33.33333333%}.col-xs-3{width:25%}.col-xs-2{width:16.66666667%}.col-xs-1{width:8.33333333%}.col-xs-pull-12{right:100%}.col-xs-pull-11{right:91.66666667%}.col-xs-pull-10{right:83.33333333%}.col-xs-pull-9{right:75%}.col-xs-pull-8{right:66.66666667%}.col-xs-pull-7{right:58.33333333%}.col-xs-pull-6{right:50%}.col-xs-pull-5{right:41.66666667%}.col-xs-pull-4{right:33.33333333%}.col-xs-pull-3{right:25%}.col-xs-pull-2{right:16.66666667%}.col-xs-pull-1{right:8.33333333%}.col-xs-pull-0{right:auto}.col-xs-push-12{left:100%}.col-xs-push-11{left:91.66666667%}.col-xs-push-10{left:83.33333333%}.col-xs-push-9{left:75%}.col-xs-push-8{left:66.66666667%}.col-xs-push-7{left:58.33333333%}.col-xs-push-6{left:50%}.col-xs-push-5{left:41.66666667%}.col-xs-push-4{left:33.33333333%}.col-xs-push-3{left:25%}.col-xs-push-2{left:16.66666667%}.col-xs-push-1{left:8.33333333%}.col-xs-push-0{left:auto}.col-xs-offset-12{margin-left:100%}.col-xs-offset-11{margin-left:91.66666667%}.col-xs-offset-10{margin-left:83.33333333%}.col-xs-offset-9{margin-left:75%}.col-xs-offset-8{margin-left:66.66666667%}.col-xs-offset-7{margin-left:58.33333333%}.col-xs-offset-6{margin-left:50%}.col-xs-offset-5{margin-left:41.66666667%}.col-xs-offset-4{margin-left:33.33333333%}.col-xs-offset-3{margin-left:25%}.col-xs-offset-2{margin-left:16.66666667%}.col-xs-offset-1{margin-left:8.33333333%}.col-xs-offset-0{margin-left:0%}@media (min-width: 768px){.col-sm-1,.col-sm-2,.col-sm-3,.col-sm-4,.col-sm-5,.col-sm-6,.col-sm-7,.col-sm-8,.col-sm-9,.col-sm-10,.col-sm-11,.col-sm-12{float:left}.col-sm-12{width:100%}.col-sm-11{width:91.66666667%}.col-sm-10{width:83.33333333%}.col-sm-9{width:75%}.col-sm-8{width:66.66666667%}.col-sm-7{width:58.33333333%}.col-sm-6{width:50%}.col-sm-5{width:41.66666667%}.col-sm-4{width:33.33333333%}.col-sm-3{width:25%}.col-sm-2{width:16.66666667%}.col-sm-1{width:8.33333333%}.col-sm-pull-12{right:100%}.col-sm-pull-11{right:91.66666667%}.col-sm-pull-10{right:83.33333333%}.col-sm-pull-9{right:75%}.col-sm-pull-8{right:66.66666667%}.col-sm-pull-7{right:58.33333333%}.col-sm-pull-6{right:50%}.col-sm-pull-5{right:41.66666667%}.col-sm-pull-4{right:33.33333333%}.col-sm-pull-3{right:25%}.col-sm-pull-2{right:16.66666667%}.col-sm-pull-1{right:8.33333333%}.col-sm-pull-0{right:auto}.col-sm-push-12{left:100%}.col-sm-push-11{left:91.66666667%}.col-sm-push-10{left:83.33333333%}.col-sm-push-9{left:75%}.col-sm-push-8{left:66.66666667%}.col-sm-push-7{left:58.33333333%}.col-sm-push-6{left:50%}.col-sm-push-5{left:41.66666667%}.col-sm-push-4{left:33.33333333%}.col-sm-push-3{left:25%}.col-sm-push-2{left:16.66666667%}.col-sm-push-1{left:8.33333333%}.col-sm-push-0{left:auto}.col-sm-offset-12{margin-left:100%}.col-sm-offset-11{margin-left:91.66666667%}.col-sm-offset-10{margin-left:83.33333333%}.col-sm-offset-9{margin-left:75%}.col-sm-offset-8{margin-left:66.66666667%}.col-sm-offset-7{margin-left:58.33333333%}.col-sm-offset-6{margin-left:50%}.col-sm-offset-5{margin-left:41.66666667%}.col-sm-offset-4{margin-left:33.33333333%}.col-sm-offset-3{margin-left:25%}.col-sm-offset-2{margin-left:16.66666667%}.col-sm-offset-1{margin-left:8.33333333%}.col-sm-offset-0{margin-left:0%}}@media (min-width: 992px){.col-md-1,.col-md-2,.col-md-3,.col-md-4,.col-md-5,.col-md-6,.col-md-7,.col-md-8,.col-md-9,.col-md-10,.col-md-11,.col-md-12{float:left}.col-md-12{width:100%}.col-md-11{width:91.66666667%}.col-md-10{width:83.33333333%}.col-md-9{width:75%}.col-md-8{width:66.66666667%}.col-md-7{width:58.33333333%}.col-md-6{width:50%}.col-md-5{width:41.66666667%}.col-md-4{width:33.33333333%}.col-md-3{width:25%}.col-md-2{width:16.66666667%}.col-md-1{width:8.33333333%}.col-md-pull-12{right:100%}.col-md-pull-11{right:91.66666667%}.col-md-pull-10{right:83.33333333%}.col-md-pull-9{right:75%}.col-md-pull-8{right:66.66666667%}.col-md-pull-7{right:58.33333333%}.col-md-pull-6{right:50%}.col-md-pull-5{right:41.66666667%}.col-md-pull-4{right:33.33333333%}.col-md-pull-3{right:25%}.col-md-pull-2{right:16.66666667%}.col-md-pull-1{right:8.33333333%}.col-md-pull-0{right:auto}.col-md-push-12{left:100%}.col-md-push-11{left:91.66666667%}.col-md-push-10{left:83.33333333%}.col-md-push-9{left:75%}.col-md-push-8{left:66.66666667%}.col-md-push-7{left:58.33333333%}.col-md-push-6{left:50%}.col-md-push-5{left:41.66666667%}.col-md-push-4{left:33.33333333%}.col-md-push-3{left:25%}.col-md-push-2{left:16.66666667%}.col-md-push-1{left:8.33333333%}.col-md-push-0{left:auto}.col-md-offset-12{margin-left:100%}.col-md-offset-11{margin-left:91.66666667%}.col-md-offset-10{margin-left:83.33333333%}.col-md-offset-9{margin-left:75%}.col-md-offset-8{margin-left:66.66666667%}.col-md-offset-7{margin-left:58.33333333%}.col-md-offset-6{margin-left:50%}.col-md-offset-5{margin-left:41.66666667%}.col-md-offset-4{margin-left:33.33333333%}.col-md-offset-3{margin-left:25%}.col-md-offset-2{margin-left:16.66666667%}.col-md-offset-1{margin-left:8.33333333%}.col-md-offset-0{margin-left:0%}}@media (min-width: 1200px){.col-lg-1,.col-lg-2,.col-lg-3,.col-lg-4,.col-lg-5,.col-lg-6,.col-lg-7,.col-lg-8,.col-lg-9,.col-lg-10,.col-lg-11,.col-lg-12{float:left}.col-lg-12{width:100%}.col-lg-11{width:91.66666667%}.col-lg-10{width:83.33333333%}.col-lg-9{width:75%}.col-lg-8{width:66.66666667%}.col-lg-7{width:58.33333333%}.col-lg-6{width:50%}.col-lg-5{width:41.66666667%}.col-lg-4{width:33.33333333%}.col-lg-3{width:25%}.col-lg-2{width:16.66666667%}.col-lg-1{width:8.33333333%}.col-lg-pull-12{right:100%}.col-lg-pull-11{right:91.66666667%}.col-lg-pull-10{right:83.33333333%}.col-lg-pull-9{right:75%}.col-lg-pull-8{right:66.66666667%}.col-lg-pull-7{right:58.33333333%}.col-lg-pull-6{right:50%}.col-lg-pull-5{right:41.66666667%}.col-lg-pull-4{right:33.33333333%}.col-lg-pull-3{right:25%}.col-lg-pull-2{right:16.66666667%}.col-lg-pull-1{right:8.33333333%}.col-lg-pull-0{right:auto}.col-lg-push-12{left:100%}.col-lg-push-11{left:91.66666667%}.col-lg-push-10{left:83.33333333%}.col-lg-push-9{left:75%}.col-lg-push-8{left:66.66666667%}.col-lg-push-7{left:58.33333333%}.col-lg-push-6{left:50%}.col-lg-push-5{left:41.66666667%}.col-lg-push-4{left:33.33333333%}.col-lg-push-3{left:25%}.col-lg-push-2{left:16.66666667%}.col-lg-push-1{left:8.33333333%}.col-lg-push-0{left:auto}.col-lg-offset-12{margin-left:100%}.col-lg-offset-11{margin-left:91.66666667%}.col-lg-offset-10{margin-left:83.33333333%}.col-lg-offset-9{margin-left:75%}.col-lg-offset-8{margin-left:66.66666667%}.col-lg-offset-7{margin-left:58.33333333%}.col-lg-offset-6{margin-left:50%}.col-lg-offset-5{margin-left:41.66666667%}.col-lg-offset-4{margin-left:33.33333333%}.col-lg-offset-3{margin-left:25%}.col-lg-offset-2{margin-left:16.66666667%}.col-lg-offset-1{margin-left:8.33333333%}.col-lg-offset-0{margin-left:0%}}@media (min-width: 768px){.col-md-4{flex:none}}.col{flex-basis:auto;-ms-flex-positive:1;flex-grow:1;max-width:100%}";

const cloudinaryAppCss = globalstylesCss + ".app{min-height:100vh;display:flex;align-items:flex-start;background-color:#1d1d1d;padding-top:2em}h2{color:white!important;margin-top:0!important}em{background-color:#502767!important}.presets{align-self:flex-start;width:40%;height:100%;margin:1em}.instructions{padding:2em;color:white}.image{width:70%;margin:1em;overflow-y:scroll;overflow-x:hidden;padding:1em}.empty{width:100%;min-height:500px;background-color:gainsboro;display:flex;align-items:center;justify-content:center;position:relative}.drag{position:absolute;top:0;left:0;margin:1em;font-size:16px;color:#502767}.canvas{width:100%;height:auto;background-color:gainsboro;display:flex;align-items:center;justify-content:center;position:relative}loading-spinner{position:absolute;left:50%;top:50%;transform:translate(-50%, -50%)}.image img{width:100%;height:auto;display:block;transition:opacity 0.2s ease-in}.imagecontrols{display:flex}@media only screen and (max-width: 1100px){.image{width:80%}}@media only screen and (max-width: 850px){.image{width:100%;padding:0;margin-top:0}.app{flex-wrap:wrap;padding-top:0}.presets{width:100%;display:flex;flex-wrap:wrap;justify-content:center}.empty{width:100%;min-height:500px;background-color:gainsboro}.instructions{padding:1em}}";

const CloudinaryApp = class {
    constructor(hostRef) {
        registerInstance(this, hostRef);
    }
    componentDidLoad() {
        if (this.public_id)
            this.submitImage();
    }
    submitImage(adjustments = {}) {
        let original = {
            transformations: {
                preset: '',
            },
            publicId: this.public_id
        };
        let data = !this.selectedPreset ? original : { transformations: {
                preset: this.selectedPreset,
            },
            publicId: this.public_id };
        if (Object.keys(adjustments).length > 0)
            data.transformations.edit = adjustments;
        let payload = {
            method: 'POST',
            credentials: 'same-origin',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(data)
        };
        let url = `https://kclsu-heroku.herokuapp.com/transform`;
        fetch(url, payload)
            .then(res => res.text())
            .then(img => {
            this.image = img;
            this.setTimer();
        })
            .catch(er => {
            console.log(er);
        });
    }
    mapPresets() {
        return presets.map(node => {
            return h("preset-card", { dimensions: node.dimensions, presetid: node.id, presetname: node.name });
        });
    }
    resetToOriginal() {
        this.selectedPreset = '';
    }
    setTimer() {
        let img = this.host.querySelector('img');
        let spinner = this.host.querySelector('loading-spinner');
        img.style.opacity = 0;
        spinner.show = true;
        this.timer = setTimeout(() => {
            img.style.opacity = 1;
            spinner.show = false;
        }, 2500);
    }
    onSelectedPreset(event) {
        this.selectedPreset = event.detail;
    }
    onSubmittedEdits(event) {
        this.submitImage(event.detail);
    }
    onEmittedClick(event) {
        if (event.detail === 'showOriginal')
            this.resetToOriginal();
    }
    ResubmitImage() {
        this.submitImage();
    }
    imageUploaded() {
        this.submitImage();
    }
    disconnectedCallback() {
        clearTimeout(this.timer);
    }
    render() {
        let img = !this.image ? h("div", { class: 'empty' }, " ", h("span", { class: "drag" }, "Drag and Drop your image here... "), h("div", { class: "upload" }, h("slot", null))) : h("img", { src: this.image });
        let controls = ([
            h("flex-container", { alignx: 'justify-content', wrap: true, fillContainer: true }, h("kclsu-button", { newtab: true, emitid: 'showOriginal', green: true, small: true }, "Original"), h("kclsu-button", { newtab: true, download: true, green: true, small: true, link: this.image }, "Download"), h("preset-controls", null))
        ]);
        return (h("div", { class: "app" }, h("div", { class: "presets" }, h("div", { class: "instructions" }, h("h2", null, "KCLSU Cloudinary App"), h("p", null, "Upload your image", h("br", null), " Select your preset", h("br", null), h("em", null, "'Right Click Save As'"), " to download.")), !this.image ? '' : this.mapPresets()), h("div", { class: 'image' }, h("div", { class: 'canvas' }, h("loading-spinner", { show: false }), img), !this.image ? '' : controls)));
    }
    get host() { return getElement(this); }
    static get watchers() { return {
        "selectedPreset": ["ResubmitImage"],
        "public_id": ["imageUploaded"]
    }; }
};
CloudinaryApp.style = cloudinaryAppCss;

export { CloudinaryApp as cloudinary_app };
